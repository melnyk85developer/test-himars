{"ast":null,"code":"import _regeneratorRuntime from\"/home/mr/www/melnyk85developer.github.io/test-himars/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/mr/www/melnyk85developer.github.io/test-himars/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/home/mr/www/melnyk85developer.github.io/test-himars/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/home/mr/www/melnyk85developer.github.io/test-himars/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect}from\"react\";import{v1 as uuidv1}from'uuid';import{profileAPI}from'../services/getUsers';import HiMarsMoks from\"../fixtures/HiMarsMoks\";var ADD_POST='profile/ADD-POST';var SET_PROFILE='profile/SET-PROFILE';var SET_STATUS='profile/SET_STATUS';var posts=HiMarsMoks.posts;var initialState={profile:null,status:\"\",posts:posts};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:{var newPost={id:uuidv1(),post:action.newPostText,like:0,dislike:0};return _objectSpread(_objectSpread({},state),{},{posts:[].concat(_toConsumableArray(state.posts),[newPost]),newPostText:''});}case SET_STATUS:{return _objectSpread(_objectSpread({},state),{},{status:action.status});}case SET_PROFILE:{return _objectSpread(_objectSpread({},state),{},{profile:action.profile});}default:return state;}};export var addPostActionCreator=function addPostActionCreator(newPostText){return{type:ADD_POST,newPostText:newPostText};};export var setProfile=function setProfile(profile){return{type:SET_PROFILE,profile:profile};};export var setStatus=function setStatus(status){return{type:SET_STATUS,status:status};};export var getProfile=function getProfile(userId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return profileAPI.getProfile(userId);case 2:response=_context.sent;dispatch(setProfile(response.data));case 4:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getStatus=function getStatus(userId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return profileAPI.getStatus(userId);case 2:response=_context2.sent;dispatch(setStatus(response.data));case 4:case\"end\":return _context2.stop();}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var updateStatus=function updateStatus(status){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return profileAPI.updateStatus(status);case 2:response=_context3.sent;if(response.data.resultCode===0){dispatch(setStatus(status));}case 4:case\"end\":return _context3.stop();}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export default profileReducer;","map":{"version":3,"names":["useEffect","v1","uuidv1","profileAPI","HiMarsMoks","ADD_POST","SET_PROFILE","SET_STATUS","posts","initialState","profile","status","profileReducer","state","arguments","length","undefined","action","type","newPost","id","post","newPostText","like","dislike","_objectSpread","concat","_toConsumableArray","addPostActionCreator","setProfile","setStatus","getProfile","userId","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","response","wrap","_callee$","_context","prev","next","sent","data","stop","_x","apply","getStatus","_ref2","_callee2","_callee2$","_context2","_x2","updateStatus","_ref3","_callee3","_callee3$","_context3","resultCode","_x3"],"sources":["/home/mr/www/melnyk85developer.github.io/test-himars/src/store/profileReducer.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport { v1 as uuidv1 } from 'uuid';\nimport { profileAPI } from '../services/getUsers';\nimport HiMarsMoks from \"../fixtures/HiMarsMoks\";\n\nconst ADD_POST = 'profile/ADD-POST';\nconst SET_PROFILE = 'profile/SET-PROFILE';\nconst SET_STATUS = 'profile/SET_STATUS';\n\nconst posts = HiMarsMoks.posts;\n\nlet initialState = {\n    profile: null,\n    status: \"\",\n    posts\n}\n\nconst profileReducer = (state = initialState, action) => {\n\n    switch(action.type){\n        case ADD_POST: {\n            let newPost = {\n                id: uuidv1(),\n                post: action.newPostText,\n                like: 0,\n                dislike: 0\n            };\n            return { \n                ...state,\n                posts: [...state.posts, newPost],\n                newPostText: ''\n            }\n        }\n        case SET_STATUS: {\n            return { \n                ...state,\n                status: action.status\n            };\n        }\n        case SET_PROFILE: {\n            return {\n                ...state,\n                profile: action.profile\n            }\n        }\n        default:\n            return state;\n    }\n}\nexport const addPostActionCreator = (newPostText) => ({type: ADD_POST, newPostText})\nexport const setProfile = (profile) => ({type: SET_PROFILE, profile})\nexport const setStatus = (status) => ({type: SET_STATUS, status})\n\nexport const getProfile = (userId) => async (dispatch) => {\n    const response = await profileAPI.getProfile(userId);\n    dispatch(setProfile(response.data));\n}\nexport const getStatus = (userId) => async (dispatch) => {\n    const response = await profileAPI.getStatus(userId)\n    dispatch(setStatus(response.data))\n\n}\nexport const updateStatus = (status) => async (dispatch) => {\n    const response = await profileAPI.updateStatus(status)\n    if(response.data.resultCode === 0){\n        dispatch(setStatus(status))\n    }\n\n}\nexport default profileReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}