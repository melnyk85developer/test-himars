{"ast":null,"code":"import _toConsumableArray from\"/home/mr/www/melnyk85developer.github.io/test-himars/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/home/mr/www/melnyk85developer.github.io/test-himars/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useEffect}from\"react\";import{v1 as uuidv1}from'uuid';import{userProfileAPI}from\"../services/getUsers\";import HiMarsMoks from\"../fixtures/HiMarsMoks\";var ADD_POST='userProfile/ADD-POST';var SET_USER_PROFILE='userProfile/SET-USER-PROFILE';var SET_STATUS='userProfile/SET_STATUS';var posts=HiMarsMoks.posts;var initialState={profile:null,status:\"\",posts:posts};var userProfileReducer=function userProfileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:{var newPost={id:uuidv1(),post:action.newPostText,like:0,dislike:0};return _objectSpread(_objectSpread({},state),{},{posts:[].concat(_toConsumableArray(state.posts),[newPost]),newPostText:''});}case SET_STATUS:{return _objectSpread(_objectSpread({},state),{},{status:action.status});}case SET_USER_PROFILE:{return _objectSpread(_objectSpread({},state),{},{profile:action.profile});}default:return state;}};export var addPostActionCreator=function addPostActionCreator(newPostText){return{type:ADD_POST,newPostText:newPostText};};export var setUserProfile=function setUserProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var setStatus=function setStatus(status){return{type:SET_STATUS,status:status};};export var getUserProfile=function getUserProfile(userId){return function(dispatch){useEffect(function(){userProfileAPI.getUserProfile(userId).then(function(response){dispatch(setUserProfile(response.data));});},[dispatch]);};};export var getStatus=function getStatus(userId){return function(dispatch){userProfileAPI.getStatus(userId).then(function(response){dispatch(setStatus(response.data.data));});};};export var updateStatus=function updateStatus(status){return function(dispatch){userProfileAPI.updateStatus(status).then(function(response){if(response.data.resultCode===0){dispatch(setStatus(response.data));}});};};export default userProfileReducer;","map":{"version":3,"names":["useEffect","v1","uuidv1","userProfileAPI","HiMarsMoks","ADD_POST","SET_USER_PROFILE","SET_STATUS","posts","initialState","profile","status","userProfileReducer","state","arguments","length","undefined","action","type","newPost","id","post","newPostText","like","dislike","_objectSpread","concat","_toConsumableArray","addPostActionCreator","setUserProfile","setStatus","getUserProfile","userId","dispatch","then","response","data","getStatus","updateStatus","resultCode"],"sources":["/home/mr/www/melnyk85developer.github.io/test-himars/src/store/userProfileReducer.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport { v1 as uuidv1 } from 'uuid';\nimport { userProfileAPI } from \"../services/getUsers\";\nimport HiMarsMoks from \"../fixtures/HiMarsMoks\";\n\nconst ADD_POST = 'userProfile/ADD-POST';\nconst SET_USER_PROFILE = 'userProfile/SET-USER-PROFILE';\nconst SET_STATUS = 'userProfile/SET_STATUS';\n\nconst posts = HiMarsMoks.posts;\n\nlet initialState = {\n    profile: null,\n    status: \"\",\n    posts\n}\n\nconst userProfileReducer = (state = initialState, action) => {\n\n    switch(action.type){\n        case ADD_POST: {\n            let newPost = {\n                id: uuidv1(),\n                post: action.newPostText,\n                like: 0,\n                dislike: 0\n            };\n            return { \n                ...state,\n                posts: [...state.posts, newPost],\n                newPostText: ''\n            }\n        }\n        case SET_STATUS: {\n            return { \n                ...state,\n                status: action.status\n            };\n        }\n        case SET_USER_PROFILE: {\n            return {\n                ...state,\n                profile: action.profile\n            }\n        }\n        default:\n            return state;\n    }\n}\nexport const addPostActionCreator = (newPostText) => ({type: ADD_POST, newPostText})\nexport const setUserProfile = (profile) => ({type: SET_USER_PROFILE, profile})\nexport const setStatus = (status) => ({type: SET_STATUS, status})\nexport const getUserProfile = (userId) => (dispatch) => {\n    useEffect(() => {\n        userProfileAPI.getUserProfile(userId).then(response => {\n            dispatch(setUserProfile(response.data));\n        })\n    }, [dispatch])\n}\nexport const getStatus = (userId) => (dispatch) => {\n    userProfileAPI.getStatus(userId)\n        .then(response => {\n            dispatch(setStatus(response.data.data))\n        })\n}\nexport const updateStatus = (status) => (dispatch) => {\n    userProfileAPI.updateStatus(status)\n        .then(response => {\n            if(response.data.resultCode === 0){\n                dispatch(setStatus(response.data))\n            }\n        })\n}\nexport default userProfileReducer;"],"mappings":"2RAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,OAASC,EAAE,GAAI,CAAAC,MAAM,KAAQ,MAAM,CACnC,OAASC,cAAc,KAAQ,sBAAsB,CACrD,MAAO,CAAAC,UAAU,KAAM,wBAAwB,CAE/C,GAAM,CAAAC,QAAQ,CAAG,sBAAsB,CACvC,GAAM,CAAAC,gBAAgB,CAAG,8BAA8B,CACvD,GAAM,CAAAC,UAAU,CAAG,wBAAwB,CAE3C,GAAM,CAAAC,KAAK,CAAGJ,UAAU,CAACI,KAAK,CAE9B,GAAI,CAAAC,YAAY,CAAG,CACfC,OAAO,CAAE,IAAI,CACbC,MAAM,CAAE,EAAE,CACVH,KAAK,CAALA,KACJ,CAAC,CAED,GAAM,CAAAI,kBAAkB,CAAG,QAArB,CAAAA,kBAAkBA,CAAA,CAAqC,IAAjC,CAAAC,KAAK,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAGL,YAAY,IAAE,CAAAQ,MAAM,CAAAH,SAAA,CAAAC,MAAA,GAAAD,SAAA,IAAAE,SAAA,CAEpD,OAAOC,MAAM,CAACC,IAAI,EACd,IAAK,CAAAb,QAAQ,CAAE,CACX,GAAI,CAAAc,OAAO,CAAG,CACVC,EAAE,CAAElB,MAAM,CAAC,CAAC,CACZmB,IAAI,CAAEJ,MAAM,CAACK,WAAW,CACxBC,IAAI,CAAE,CAAC,CACPC,OAAO,CAAE,CACb,CAAC,CACD,OAAAC,aAAA,CAAAA,aAAA,IACOZ,KAAK,MACRL,KAAK,IAAAkB,MAAA,CAAAC,kBAAA,CAAMd,KAAK,CAACL,KAAK,GAAEW,OAAO,EAAC,CAChCG,WAAW,CAAE,EAAE,GAEvB,CACA,IAAK,CAAAf,UAAU,CAAE,CACb,OAAAkB,aAAA,CAAAA,aAAA,IACOZ,KAAK,MACRF,MAAM,CAAEM,MAAM,CAACN,MAAM,GAE7B,CACA,IAAK,CAAAL,gBAAgB,CAAE,CACnB,OAAAmB,aAAA,CAAAA,aAAA,IACOZ,KAAK,MACRH,OAAO,CAAEO,MAAM,CAACP,OAAO,GAE/B,CACA,QACI,MAAO,CAAAG,KAAK,CACpB,CACJ,CAAC,CACD,MAAO,IAAM,CAAAe,oBAAoB,CAAG,QAAvB,CAAAA,oBAAoBA,CAAIN,WAAW,QAAM,CAACJ,IAAI,CAAEb,QAAQ,CAAEiB,WAAW,CAAXA,WAAW,CAAC,EAAC,CACpF,MAAO,IAAM,CAAAO,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAInB,OAAO,QAAM,CAACQ,IAAI,CAAEZ,gBAAgB,CAAEI,OAAO,CAAPA,OAAO,CAAC,EAAC,CAC9E,MAAO,IAAM,CAAAoB,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAInB,MAAM,QAAM,CAACO,IAAI,CAAEX,UAAU,CAAEI,MAAM,CAANA,MAAM,CAAC,EAAC,CACjE,MAAO,IAAM,CAAAoB,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIC,MAAM,QAAK,UAACC,QAAQ,CAAK,CACpDjC,SAAS,CAAC,UAAM,CACZG,cAAc,CAAC4B,cAAc,CAACC,MAAM,CAAC,CAACE,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACnDF,QAAQ,CAACJ,cAAc,CAACM,QAAQ,CAACC,IAAI,CAAC,CAAC,CAC3C,CAAC,CAAC,CACN,CAAC,CAAE,CAACH,QAAQ,CAAC,CAAC,CAClB,CAAC,GACD,MAAO,IAAM,CAAAI,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAIL,MAAM,QAAK,UAACC,QAAQ,CAAK,CAC/C9B,cAAc,CAACkC,SAAS,CAACL,MAAM,CAAC,CAC3BE,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACdF,QAAQ,CAACH,SAAS,CAACK,QAAQ,CAACC,IAAI,CAACA,IAAI,CAAC,CAAC,CAC3C,CAAC,CAAC,CACV,CAAC,GACD,MAAO,IAAM,CAAAE,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAI3B,MAAM,QAAK,UAACsB,QAAQ,CAAK,CAClD9B,cAAc,CAACmC,YAAY,CAAC3B,MAAM,CAAC,CAC9BuB,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACd,GAAGA,QAAQ,CAACC,IAAI,CAACG,UAAU,GAAK,CAAC,CAAC,CAC9BN,QAAQ,CAACH,SAAS,CAACK,QAAQ,CAACC,IAAI,CAAC,CAAC,CACtC,CACJ,CAAC,CAAC,CACV,CAAC,GACD,cAAe,CAAAxB,kBAAkB"},"metadata":{},"sourceType":"module","externalDependencies":[]}